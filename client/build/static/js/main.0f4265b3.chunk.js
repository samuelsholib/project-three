(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{75:function(e,t,n){},82:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t);var a,c,s,i,r,l,o,d,j,b,m,u,p,h=n(3),O=n.n(h),x=n(59),g=n.n(x),v=(n(75),n(23)),f=n(66),y=n(68),N=n(96),k=n(94),w=n(65),I=n(12),$=n(9),S=n(91),_=n(13),q=n(95),P=(Object(q.a)(a||(a=Object(_.a)(["\n  query allUsers {\n    user {\n      _id\n      name\n      pets\n      favorites {\n        _id\n      name\n      description\n      image\n      price\n      quantity\n      }\n    }\n  }\n"]))),Object(q.a)(c||(c=Object(_.a)(["\n  query allPets {\n    pets {\n      _id\n      name\n      description\n      image\n      price\n      quantity\n    }\n  }\n"])))),D=Object(q.a)(s||(s=Object(_.a)(["\n  query user($userId: ID!) {\n    user(userId: $userId) {\n      _id\n      name\n      pets{\n        name\n      }\n      favorites {\n        _id\n      name\n      description\n      image\n      price\n      quantity\n      }\n    }\n  }\n"]))),F=Object(q.a)(i||(i=Object(_.a)(["\n  query singlePet($petId: ID!) {\n    pet(petId: $petId) {\n      _id\n      name\n      description\n      image\n      price\n      quantity\n    }\n  }\n"]))),T=Object(q.a)(r||(r=Object(_.a)(["\n  query me {\n    me {\n      _id\n      name\n      pets{\n        name\n      }\n      favorites {\n        _id\n      name\n      description\n      image\n      price\n      quantity\n      }\n    }\n  }\n"]))),Y=n(60),C=n(61),U=n(49),L=new(function(){function e(){Object(Y.a)(this,e)}return Object(C.a)(e,[{key:"getProfile",value:function(){return Object(U.a)(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!(!e||this.isTokenExpired(e))}},{key:"isTokenExpired",value:function(e){return Object(U.a)(e).exp<Date.now()/1e3&&(localStorage.removeItem("id_token"),!0)}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.reload()}}]),e}()),B=n(2),z=function(e){var t=e.favorites,n=e.title,a=e.showTitle;return console.log("object_id",t),t.length?(console.log("the list !!!!!!",t),Object(B.jsxs)("div",{children:[a&&Object(B.jsx)("h3",{children:n}),t&&t.map((function(e){return console.log("fav",e),Object(B.jsxs)("div",{className:"card mb-3",children:[Object(B.jsx)("h4",{className:"card-header bg-primary text-light p-2 m-0",children:e.name}),Object(B.jsx)("img",{src:e.image}),Object(B.jsx)("p",{children:e.description})]})}))]})):Object(B.jsx)("h3",{children:"No Favorites Yet"})},E=function(){var e=Object($.g)().userId,t=Object(S.a)(e?D:T,{variables:{userId:e}}),n=t.loading,a=t.data,c=(null===a||void 0===a?void 0:a.me)||(null===a||void 0===a?void 0:a.user)||{};return n?Object(B.jsx)("div",{children:"Loading..."}):null!==c&&void 0!==c&&c._id?(L.loggedIn()&&L.getProfile().data._id===c._id&&console.log("USER FAVS in profules",c.name),Object(B.jsx)("div",{children:Object(B.jsxs)("div",{className:"flex-row justify-center mb-3",children:[Object(B.jsxs)("h2",{className:"col-12 col-md-10 bg-dark text-light p-3 mb-5",children:["Viewing ",e?"".concat(c.name,"'s"):"your"," profile."]}),Object(B.jsx)("div",{className:"col-12 col-md-10 mb-5"}),!e&&Object(B.jsx)("button",{children:"Add a Pet!"}),e?Object(B.jsx)("div",{className:"col-12 col-md-10 mb-3 p-3",style:{border:"1px dotted #1a1a1a"},children:Object(B.jsx)(z,{showTitle:!0,favorites:c.favorites,title:"".concat(c.name,"'s Favorite Pets!")})}):Object(B.jsx)("div",{className:"col-12 col-md-10 mb-3 p-3",style:{border:"1px dotted #1a1a1a"},children:Object(B.jsx)(z,{showTitle:!0,favorites:c.favorites,title:"Your Favorite Pets!"})})]})})):Object(B.jsx)("h4",{children:"You need to be logged in to see this. Use the navigation links above to sign up or log in!"})},V=n.p+"static/media/bckg.8f97d2a0.png",A=function(e){var t=e.pets,n=e.title;return t.length?Object(B.jsxs)("div",{children:[Object(B.jsx)("h3",{className:"text-primary",children:n}),Object(B.jsxs)("div",{className:"flex-row justify-space-between my-4",children:[Object(B.jsx)("img",{className:"background",src:V,alt:""}),t&&t.map((function(e){return Object(B.jsx)("div",{className:"col-12 col-xl-6",children:Object(B.jsxs)("div",{className:"card mb-3",children:[Object(B.jsxs)("h4",{className:"card-header bg-dark text-light p-2 m-0",children:[e.name," ",Object(B.jsx)("br",{}),Object(B.jsx)("span",{className:"text-white",style:{fontSize:"1rem"},children:Object(B.jsx)("img",{src:e.image,alt:e.name,width:"500",height:"600"})})]}),Object(B.jsx)(I.b,{className:"btn btn-block btn-squared btn-light text-dark",to:"/pet/".concat(e._id),children:"View and endorse their skills."})]})})}))]})]}):Object(B.jsx)("h3",{children:"No Profiles Yet"})},J=function(){var e=Object(S.a)(P),t=e.loading,n=e.data;console.log(n);var a=(null===n||void 0===n?void 0:n.pets)||[];return Object(B.jsx)("main",{children:Object(B.jsx)("div",{className:"flex-row justify-center",children:Object(B.jsx)("div",{className:"col-12 col-md-10 my-3",children:t?Object(B.jsx)("div",{children:"Loading..."}):Object(B.jsx)(A,{pets:a,title:"Here's the current Lists of Pets..."})})})})},M=(n(82),function(){var e=Object($.g)().petId,t=Object(S.a)(F,{variables:{petId:e}}),n=t.loading,a=t.data,c=(null===a||void 0===a?void 0:a.pet)||{};return n?Object(B.jsx)("div",{children:"Loading..."}):null!==c&&void 0!==c&&c.name?Object(B.jsxs)("div",{className:"card flex-column",children:[Object(B.jsx)("h2",{className:"card-header text-center",children:c.name}),Object(B.jsx)("img",{className:"card-body align-self-center",src:c.image,alt:c.name}),Object(B.jsxs)("p",{className:"card-footer text-center description",children:["description: ",c.description]}),Object(B.jsxs)("p",{className:"card-price text-center price",children:["price: ",c.price]}),Object(B.jsxs)("p",{className:"card-quantity text-center quantity",children:["quantity: ",c.quantity]})]}):Object(B.jsx)("h4",{children:"You need to be logged in to see your profile page. Use the navigation links above to sign up or log in!"})}),W=n(44),G=n(30),H=n(33),R=n(32),K=n.n(R),Q=n(93),X=Object(q.a)(l||(l=Object(_.a)(["\n  mutation addUser($name: String!, $email: String!, $password: String!) {\n    addUser(name: $name, email: $email, password: $password) {\n      token\n      user {\n        _id\n        name\n      }\n    }\n  }\n"]))),Z=(Object(q.a)(o||(o=Object(_.a)(["\n\n  mutation addPet($userId: ID!) {\n    addPet(userId: $userId) {\n\n      _id\n      name\n      pets{\n        name\n      }\n    }\n  }\n"]))),Object(q.a)(d||(d=Object(_.a)(["\nmutation updatePet($name: String!, $description: String!, $price: Number!, $quantity: Number!, $image: String!) {\n  updatePet(name: $name, description: $description, price: $price, quantity: $quantity, image: $image) {\n    token\n    pet {\n      _id\n      name\n    }\n  }\n}\n"]))),Object(q.a)(j||(j=Object(_.a)(["\n  mutation addFavorite($userId: ID!, $petId: ID!) {\n    addPet(userId: $userId, petId: $petId) {\n      _id\n      name\n      favorites {\n        _id\n      name\n      description\n      image\n      price\n      quantity\n      }\n    }\n  }\n"]))),Object(q.a)(b||(b=Object(_.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n        name\n      }\n    }\n  }\n"])))),ee=(Object(q.a)(m||(m=Object(_.a)(["\n  mutation removePet($petId: ID!) {\n    removePet(petId: $petId) {\n      pets{\n        name\n      }\n    }\n  }\n"]))),Object(q.a)(u||(u=Object(_.a)(["\n  mutation removeUser($user: ID!) {\n    removeUser(user: $user) {\n      user\n    }\n  }\n"]))),Object(q.a)(p||(p=Object(_.a)(["\n  mutation removeFavorite($userId: ID!, $petId: ID!)  {\n    removeFavorite( userId: $userId, petId: $petId) {\n      _id\n      name\n      favorites {\n        _id\n      name\n      description\n      image\n      price\n      quantity\n      }\n    }\n  }\n"]))),function(){var e=Object(h.useState)({name:"",email:"",password:""}),t=Object(H.a)(e,2),n=t[0],a=t[1],c=Object(Q.a)(X),s=Object(H.a)(c,2),i=s[0],r=s[1],l=r.error,o=r.data,d=function(e){var t=e.target,c=t.name,s=t.value;a(Object(v.a)(Object(v.a)({},n),{},Object(G.a)({},c,s)))},j=function(){var e=Object(W.a)(K.a.mark((function e(t){var a,c;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(n),e.prev=2,e.next=5,i({variables:Object(v.a)({},n)});case 5:a=e.sent,c=a.data,L.login(c.addUser.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(B.jsx)("main",{className:"flex-row justify-center mb-4",children:Object(B.jsx)("div",{className:"col-12 col-lg-10",children:Object(B.jsxs)("div",{className:"card",children:[Object(B.jsx)("h4",{className:"card-header bg-dark text-light p-2",children:"Sign Up"}),Object(B.jsxs)("div",{className:"card-body",children:[o?Object(B.jsxs)("p",{children:["Success! You may now head"," ",Object(B.jsx)(I.b,{to:"/",children:"back to the homepage."})]}):Object(B.jsxs)("form",{onSubmit:j,children:[Object(B.jsx)("input",{className:"form-input",placeholder:"Your username",name:"name",type:"text",value:n.name,onChange:d}),Object(B.jsx)("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",value:n.email,onChange:d}),Object(B.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",value:n.password,onChange:d}),Object(B.jsx)("button",{className:"btn btn-block btn-info",style:{cursor:"pointer"},type:"submit",children:"Submit"})]}),l&&Object(B.jsx)("div",{className:"my-3 p-3 bg-danger text-white",children:l.message})]})]})})})}),te=function(e){var t=Object(h.useState)({email:"",password:""}),n=Object(H.a)(t,2),a=n[0],c=n[1],s=Object(Q.a)(Z),i=Object(H.a)(s,2),r=i[0],l=i[1],o=l.error,d=l.data,j=function(e){var t=e.target,n=t.name,s=t.value;c(Object(v.a)(Object(v.a)({},a),{},Object(G.a)({},n,s)))},b=function(){var e=Object(W.a)(K.a.mark((function e(t){var n,s;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,r({variables:Object(v.a)({},a)});case 4:n=e.sent,s=n.data,L.login(s.login.token),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:c({email:"",password:""});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(B.jsx)("main",{className:"flex-row justify-center mb-4",children:Object(B.jsx)("div",{className:"col-12 col-lg-10",children:Object(B.jsxs)("div",{className:"card",children:[Object(B.jsx)("h4",{className:"card-header bg-dark text-light p-2",children:"Login"}),Object(B.jsxs)("div",{className:"card-body",children:[d?Object(B.jsxs)("p",{children:["Success! You may now head"," ",Object(B.jsx)(I.b,{to:"/",children:"back to the homepage."})]}):Object(B.jsxs)("form",{onSubmit:b,children:[Object(B.jsx)("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",value:a.email,onChange:j}),Object(B.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",value:a.password,onChange:j}),Object(B.jsx)("button",{className:"btn btn-block btn-info",style:{cursor:"pointer"},type:"submit",children:"Submit"})]}),o&&Object(B.jsx)("div",{className:"my-3 p-3 bg-danger text-white",children:o.message})]})]})})})},ne=function(){var e=Object($.g)().userId,t=Object(S.a)(e?D:T,{variables:{userId:e}}),n=(t.loading,t.data),a=(null===n||void 0===n?void 0:n.me)||(null===n||void 0===n?void 0:n.user)||{};console.log("last user?",a);return Object(B.jsx)("header",{className:"bg-info text-dark mb-4 py-3 display-flex align-center",children:Object(B.jsxs)("div",{className:"container flex-column justify-space-between-lg justify-center align-center text-center",children:[Object(B.jsx)(I.b,{className:"text-dark",to:"/",children:Object(B.jsx)("h1",{className:"m-0",style:{fontSize:"3rem"},children:"Welcome to Our Brand New Pet Shop"})}),Object(B.jsx)("p",{className:"m-0",style:{fontSize:"1.75rem",fontWeight:"700"},children:"Meet your new pets @.DevTeams Pet Shop"}),Object(B.jsx)("div",{children:L.loggedIn()?Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(I.b,{className:"btn btn-block btn-squared btn-light text-dark",to:"/me",children:"View your profile."}),Object(B.jsx)("button",{className:"btn btn-lg btn-light m-2",onClick:function(e){e.preventDefault(),L.logout()},children:"Logout"})]}):Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(I.b,{className:"btn btn-lg btn-primary m-2",to:"/login",children:"Login"}),Object(B.jsx)(I.b,{className:"btn btn-lg btn-light m-2",to:"/signup",children:"Signup"})]})})]})})},ae=function(){var e=Object($.f)(),t=Object($.e)();return Object(B.jsx)("footer",{className:"w-100 mt-auto text-dark p-4",children:Object(B.jsxs)("div",{className:"container text-center mb-5",children:["/"!==e.pathname&&Object(B.jsx)("button",{className:"btn btn-dark mb-3",onClick:function(){return t.goBack()},children:"\u2190 Go Back"}),Object(B.jsxs)("h4",{children:["\xa9 ",(new Date).getFullYear()," - Newly arrived  pets"]})]})})},ce=Object(f.a)({uri:"/graphql"}),se=Object(w.a)((function(e,t){var n=t.headers,a=localStorage.getItem("id_token");return{headers:Object(v.a)(Object(v.a)({},n),{},{authorization:a?"Bearer ".concat(a):""})}})),ie=new y.a({link:se.concat(ce),cache:new N.a});var re=function(){return Object(B.jsx)(k.a,{client:ie,children:Object(B.jsx)(I.a,{children:Object(B.jsxs)("div",{className:"flex-column justify-flex-start min-100-vh",children:[Object(B.jsx)(ne,{}),Object(B.jsxs)("div",{className:"container",children:[Object(B.jsx)($.a,{exact:!0,path:"/",children:Object(B.jsx)(J,{})}),Object(B.jsx)($.a,{exact:!0,path:"/login",children:Object(B.jsx)(te,{})}),Object(B.jsx)($.a,{exact:!0,path:"/signup",children:Object(B.jsx)(ee,{})}),Object(B.jsx)($.a,{exact:!0,path:"/pet/:petId",children:Object(B.jsx)(M,{})}),Object(B.jsx)($.a,{exact:!0,path:"/profiles/:userId",children:Object(B.jsx)(E,{})}),Object(B.jsx)($.a,{exact:!0,path:"/me",children:Object(B.jsx)(E,{})})]}),Object(B.jsx)(ae,{})]})})})},le=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,98)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),s(e),i(e)}))};g.a.render(Object(B.jsx)(O.a.StrictMode,{children:Object(B.jsx)(re,{})}),document.getElementById("root")),le()}},[[84,1,2]]]);
//# sourceMappingURL=main.0f4265b3.chunk.js.map