(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{75:function(e,t,n){},76:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t);var a,c,r,s,i,l,o,d,j,b,u,m,p=n(3),h=n.n(p),O=n(59),x=n.n(O),g=(n(75),n(25)),f=n(66),v=n(68),y=n(96),k=n(94),w=n(65),N=n(11),I=n(9),$=n(91),S=(n(76),n.p+"static/media/bckg.8f97d2a0.png"),D=n(2),P=function(e){var t=e.profiles,n=e.title;return Object(D.jsxs)("div",{children:[Object(D.jsx)("h3",{className:"text-primary",children:n}),Object(D.jsxs)("div",{className:"flex-row justify-space-between my-4",children:[Object(D.jsx)("img",{className:"background",src:S,alt:""}),t&&t.map((function(e){return Object(D.jsx)("div",{className:"col-12 col-xl-6",children:Object(D.jsxs)("div",{className:"card mb-3",children:[Object(D.jsxs)("h4",{className:"card-header bg-dark text-light p-2 m-0",children:[e.name," ",Object(D.jsx)("br",{}),Object(D.jsxs)("span",{className:"text-white",style:{fontSize:"1rem"},children:["currently has ",e.skills?e.skills.length:0," ","endorsed skill",e.skills&&1===e.skills.length?"":"s"]})]}),Object(D.jsx)(N.b,{className:"btn btn-block btn-squared btn-light text-dark",to:"/profiles/".concat(e._id),children:"View and endorse their skills."})]})},e._id)}))]})]})},_=n(13),C=n(95),q=Object(C.a)(a||(a=Object(_.a)(["\n  query allUsers {\n    user {\n      _id\n      name\n      pets\n      favorites\n    }\n  }\n"]))),F=(Object(C.a)(c||(c=Object(_.a)(["\n  query allPets {\n    pets {\n      _id\n      name\n      description\n      image\n      price\n      quantity\n    }\n  }\n"]))),Object(C.a)(r||(r=Object(_.a)(["\n  query singleProfile($profileId: ID!) {\n    profile(profileId: $profileId) {\n      _id\n      name\n      skills\n    }\n  }\n"])))),L=(Object(C.a)(s||(s=Object(_.a)(["\n  query singlePet($petId: ID!) {\n    pet(petId: $petId) {\n      _id\n      name\n      description\n      image\n      price\n      quantity\n    }\n  }\n"]))),Object(C.a)(i||(i=Object(_.a)(["\n  query me {\n    me {\n      _id\n      name\n      pets\n      favorites\n    }\n  }\n"])))),Y=function(){var e=Object($.a)(q),t=e.loading,n=e.data,a=(null===n||void 0===n?void 0:n.profiles)||[];return Object(D.jsx)("main",{children:Object(D.jsx)("div",{className:"flex-row justify-center",children:Object(D.jsx)("div",{className:"col-12 col-md-10 my-3",children:t?Object(D.jsx)("div",{children:"Loading..."}):Object(D.jsx)(P,{profiles:a,title:"Here's the current Lists of Pets..."})})})})},T=n(28),U=n(24),B=n(19),E=n.n(B),z=n(93),M=Object(C.a)(l||(l=Object(_.a)(["\n  mutation addUser($name: String!, $email: String!, $password: String!) {\n    addProfile(name: $name, email: $email, password: $password) {\n      token\n      user {\n        _id\n        name\n      }\n    }\n  }\n"]))),J=(Object(C.a)(o||(o=Object(_.a)(["\n  mutation addPet($userId: ID!, $petId: ID!) {\n    addPet(userId: $userId, pet: $petID) {\n      _id\n      name\n      pets\n    }\n  }\n"]))),Object(C.a)(d||(d=Object(_.a)(["\n  mutation add($userId: ID!, $petId: ID!) {\n    addPet(userId: $userId, pet: $petID) {\n      _id\n      name\n      favorites\n    }\n  }\n"])))),V=Object(C.a)(j||(j=Object(_.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      profile {\n        _id\n        name\n      }\n    }\n  }\n"]))),W=(Object(C.a)(b||(b=Object(_.a)(["\n  mutation removePet($pet: ID!) {\n    removePet(pet: $pet) {\n      pets\n    }\n  }\n"]))),Object(C.a)(u||(u=Object(_.a)(["\n  mutation removeUser($user: ID!) {\n    removeUser(user: $user) {\n      user\n    }\n  }\n"]))),Object(C.a)(m||(m=Object(_.a)(["\n  mutation removeFavorite($userId: ID!, $petId: ID!)  {\n    removeFavorite( userId: $userId, pet: $pet) {\n      _id\n      name\n      favorites\n    }\n  }\n"])))),G=function(e){var t=e.favorites,n=e.isLoggedInUser,a=void 0!==n&&n,c=Object(z.a)(W,{update:function(e,t){var n=t.data.removeFavorite;try{e.writeQuery({query:L,data:{me:n}})}catch(a){console.error(a)}}}),r=Object(U.a)(c,2),s=r[0],i=r[1].error,l=function(){var e=Object(T.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s({variables:{favorite:t}});case 3:n=e.sent,n.data,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return t.length?Object(D.jsxs)("div",{children:[Object(D.jsx)("div",{className:"flex-row justify-space-between my-4",children:t&&t.map((function(e){return Object(D.jsx)("div",{className:"col-12 col-xl-6",children:Object(D.jsx)("div",{className:"card mb-3",children:Object(D.jsxs)("h4",{className:"card-header bg-dark text-light p-2 m-0 display-flex align-center",children:[Object(D.jsx)("span",{children:e}),a&&Object(D.jsx)("button",{className:"btn btn-sm btn-danger ml-auto",onClick:function(){return l(e)},children:"X"})]})})},e)}))}),i&&Object(D.jsx)("div",{className:"my-3 p-3 bg-danger text-white",children:i.message})]}):Object(D.jsx)("h3",{children:"No favorites Yet"})},H=n(63),Q=n(64),X=n(52),A=new(function(){function e(){Object(H.a)(this,e)}return Object(Q.a)(e,[{key:"getProfile",value:function(){return Object(X.a)(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!(!e||this.isTokenExpired(e))}},{key:"isTokenExpired",value:function(e){return Object(X.a)(e).exp<Date.now()/1e3&&(localStorage.removeItem("id_token"),!0)}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.reload()}}]),e}()),K=function(e){var t=e.profileId,n=Object(p.useState)(""),a=Object(U.a)(n,2),c=a[0],r=a[1],s=Object(z.a)(J),i=Object(U.a)(s,2),l=i[0],o=i[1].error,d=function(){var e=Object(T.a)(E.a.mark((function e(n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,l({variables:{profileId:t,favorite:c}});case 4:e.sent,r(""),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(D.jsxs)("div",{children:[Object(D.jsx)("h4",{children:"Endorse some more favorites below."}),A.loggedIn()?Object(D.jsxs)("form",{className:"flex-row justify-center justify-space-between-md align-center",onSubmit:d,children:[Object(D.jsx)("div",{className:"col-12 col-lg-9",children:Object(D.jsx)("input",{placeholder:"Endorse some skills...",value:c,className:"form-input w-100",onChange:function(e){return r(e.target.value)}})}),Object(D.jsx)("div",{className:"col-12 col-lg-3",children:Object(D.jsx)("button",{className:"btn btn-info btn-block py-3",type:"submit",children:"Endorse favorite"})}),o&&Object(D.jsx)("div",{className:"col-12 my-3 bg-danger text-white p-3",children:o.message})]}):Object(D.jsxs)("p",{children:["You need to be logged in to endorse favorite. Please"," ",Object(D.jsx)(N.b,{to:"/login",children:"login"})," or ",Object(D.jsx)(N.b,{to:"/signup",children:"signup."})]})]})},R=function(){var e,t=Object(I.h)().profileId,n=Object($.a)(t?F:L,{variables:{profileId:t}}),a=n.loading,c=n.data,r=(null===c||void 0===c?void 0:c.me)||(null===c||void 0===c?void 0:c.profile)||{};return A.loggedIn()&&A.getProfile().data._id===t?Object(D.jsx)(I.a,{to:"/me"}):a?Object(D.jsx)("div",{children:"Loading..."}):null!==r&&void 0!==r&&r.name?Object(D.jsxs)("div",{children:[Object(D.jsxs)("h2",{className:"card-header",children:[t?"".concat(r.name,"'s"):"Your"," friends have endorsed these skills..."]}),(null===(e=r.skills)||void 0===e?void 0:e.length)>0&&Object(D.jsx)(G,{skills:r.skills,isLoggedInUser:!t&&!0}),Object(D.jsx)("div",{className:"my-4 p-4",style:{border:"1px dotted #1a1a1a"},children:Object(D.jsx)(K,{profileId:r._id})})]}):Object(D.jsx)("h4",{children:"You need to be logged in to see your profile page. Use the navigation links above to sign up or log in!"})},Z=n(33),ee=function(){var e=Object(p.useState)({name:"",email:"",password:""}),t=Object(U.a)(e,2),n=t[0],a=t[1],c=Object(z.a)(M),r=Object(U.a)(c,2),s=r[0],i=r[1],l=i.error,o=i.data,d=function(e){var t=e.target,c=t.name,r=t.value;a(Object(g.a)(Object(g.a)({},n),{},Object(Z.a)({},c,r)))},j=function(){var e=Object(T.a)(E.a.mark((function e(t){var a,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(n),e.prev=2,e.next=5,s({variables:Object(g.a)({},n)});case 5:a=e.sent,c=a.data,A.login(c.addProfile.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(D.jsx)("main",{className:"flex-row justify-center mb-4",children:Object(D.jsx)("div",{className:"col-12 col-lg-10",children:Object(D.jsxs)("div",{className:"card",children:[Object(D.jsx)("h4",{className:"card-header bg-dark text-light p-2",children:"Sign Up"}),Object(D.jsxs)("div",{className:"card-body",children:[o?Object(D.jsxs)("p",{children:["Success! You may now head"," ",Object(D.jsx)(N.b,{to:"/",children:"back to the homepage."})]}):Object(D.jsxs)("form",{onSubmit:j,children:[Object(D.jsx)("input",{className:"form-input",placeholder:"Your username",name:"name",type:"text",value:n.name,onChange:d}),Object(D.jsx)("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",value:n.email,onChange:d}),Object(D.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",value:n.password,onChange:d}),Object(D.jsx)("button",{className:"btn btn-block btn-info",style:{cursor:"pointer"},type:"submit",children:"Submit"})]}),l&&Object(D.jsx)("div",{className:"my-3 p-3 bg-danger text-white",children:l.message})]})]})})})},te=function(e){var t=Object(p.useState)({email:"",password:""}),n=Object(U.a)(t,2),a=n[0],c=n[1],r=Object(z.a)(V),s=Object(U.a)(r,2),i=s[0],l=s[1],o=l.error,d=l.data,j=function(e){var t=e.target,n=t.name,r=t.value;c(Object(g.a)(Object(g.a)({},a),{},Object(Z.a)({},n,r)))},b=function(){var e=Object(T.a)(E.a.mark((function e(t){var n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(a),e.prev=2,e.next=5,i({variables:Object(g.a)({},a)});case 5:n=e.sent,r=n.data,A.login(r.login.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:c({email:"",password:""});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(D.jsx)("main",{className:"flex-row justify-center mb-4",children:Object(D.jsx)("div",{className:"col-12 col-lg-10",children:Object(D.jsxs)("div",{className:"card",children:[Object(D.jsx)("h4",{className:"card-header bg-dark text-light p-2",children:"Login"}),Object(D.jsxs)("div",{className:"card-body",children:[d?Object(D.jsxs)("p",{children:["Success! You may now head"," ",Object(D.jsx)(N.b,{to:"/",children:"back to the homepage."})]}):Object(D.jsxs)("form",{onSubmit:b,children:[Object(D.jsx)("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",value:a.email,onChange:j}),Object(D.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",value:a.password,onChange:j}),Object(D.jsx)("button",{className:"btn btn-block btn-info",style:{cursor:"pointer"},type:"submit",children:"Submit"})]}),o&&Object(D.jsx)("div",{className:"my-3 p-3 bg-danger text-white",children:o.message})]})]})})})},ne=function(){return Object(D.jsx)("header",{className:"bg-info text-dark mb-4 py-3 display-flex align-center",children:Object(D.jsxs)("div",{className:"container flex-column justify-space-between-lg justify-center align-center text-center",children:[Object(D.jsx)(N.b,{className:"text-dark",to:"/",children:Object(D.jsx)("h1",{className:"m-0",style:{fontSize:"3rem"},children:"Welcome to Our Brand New Pet Shop"})}),Object(D.jsx)("p",{className:"m-0",style:{fontSize:"1.75rem",fontWeight:"700"},children:"Meet your new pets @.DevTeams Pet Shop"}),Object(D.jsx)("div",{children:A.loggedIn()?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(N.b,{className:"btn btn-lg btn-primary m-2",to:"/me",children:"View My Profile"}),Object(D.jsx)("button",{className:"btn btn-lg btn-light m-2",onClick:function(e){e.preventDefault(),A.logout()},children:"Logout"})]}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(N.b,{className:"btn btn-lg btn-primary m-2",to:"/login",children:"Login"}),Object(D.jsx)(N.b,{className:"btn btn-lg btn-light m-2",to:"/signup",children:"Signup"})]})})]})})},ae=function(){var e=Object(I.g)(),t=Object(I.f)();return Object(D.jsx)("footer",{className:"w-100 mt-auto text-dark p-4",children:Object(D.jsxs)("div",{className:"container text-center mb-5",children:["/"!==e.pathname&&Object(D.jsx)("button",{className:"btn btn-dark mb-3",onClick:function(){return t.goBack()},children:"\u2190 Go Back"}),Object(D.jsxs)("h4",{children:["\xa9 ",(new Date).getFullYear()," - Newly arrived  pets"]})]})})},ce=Object(f.a)({uri:"/graphql"}),re=Object(w.a)((function(e,t){var n=t.headers,a=localStorage.getItem("id_token");return{headers:Object(g.a)(Object(g.a)({},n),{},{authorization:a?"Bearer ".concat(a):""})}})),se=new v.a({link:re.concat(ce),cache:new y.a});var ie=function(){return Object(D.jsx)(k.a,{client:se,children:Object(D.jsx)(N.a,{children:Object(D.jsxs)("div",{className:"flex-column justify-flex-start min-100-vh",children:[Object(D.jsx)(ne,{}),Object(D.jsxs)("div",{className:"container",children:[Object(D.jsx)(I.b,{exact:!0,path:"/",children:Object(D.jsx)(Y,{})}),Object(D.jsx)(I.b,{exact:!0,path:"/login",children:Object(D.jsx)(te,{})}),Object(D.jsx)(I.b,{exact:!0,path:"/signup",children:Object(D.jsx)(ee,{})}),Object(D.jsx)(I.b,{exact:!0,path:"/me",children:Object(D.jsx)(R,{})}),Object(D.jsx)(I.b,{exact:!0,path:"/profiles/:profileId",children:Object(D.jsx)(R,{})})]}),Object(D.jsx)(ae,{})]})})})},le=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,98)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};x.a.render(Object(D.jsx)(h.a.StrictMode,{children:Object(D.jsx)(ie,{})}),document.getElementById("root")),le()}},[[84,1,2]]]);
//# sourceMappingURL=main.94eaa076.chunk.js.map